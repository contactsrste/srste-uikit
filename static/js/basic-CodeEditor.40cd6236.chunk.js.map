{"version":3,"file":"static/js/basic-CodeEditor.40cd6236.chunk.js","mappings":"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","sources":["components/basic/CodeEditor.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport wrapper from \"../../commons/WebComponentWrapper\";\r\nimport * as monaco from 'monaco-editor';\r\nimport { EventAPI } from \"../../commons/EventAPI\";\r\n\r\nconst dispatchedEvents = [EventAPI.EDITORCODE_CHANGED];\r\n\r\n/*\r\n    Example: <srs-codeeditor value=\"/>\r\n*/\r\nconst SrsCodeEditor = function (props, ref) {\r\n\r\n    const [editor, setEditor] = useState(null);\r\n\r\n    window.MonacoEnvironment = window.MonacoEnvironment || {\r\n        getWorkerUrl: function (moduleId, label) {\r\n            if (label === 'json') {\r\n                return './json.worker.bundle.js';\r\n            }\r\n            if (label === 'css' || label === 'scss' || label === 'less') {\r\n                return './css.worker.bundle.js';\r\n            }\r\n            if (label === 'html' || label === 'handlebars' || label === 'razor') {\r\n                return './html.worker.bundle.js';\r\n            }\r\n            if (label === 'typescript' || label === 'javascript') {\r\n                return './ts.worker.bundle.js';\r\n            }\r\n            return './editor.worker.bundle.js';\r\n        }\r\n    };\r\n\r\n    const getCompletionItems = () => {\r\n        // Add code for building a content tree of components and its properties\r\n        const components = [{ name: \"component1\", props: { prop1: \"test1\", prop2: \"red\" }, children: [{ name: \"component2\", props: { prop3: \"test3\", prop4: \"world\" } }] }];\r\n        const completionItems = [];\r\n        components.forEach(component => {\r\n            let children = [];\r\n            if (component.children) {\r\n                children = component.children.map(child => {\r\n                    return {\r\n                        label: child.name,\r\n                        kind: monaco.languages.CompletionItemKind.Class,\r\n                        insertText: child.name,\r\n                        documentation: child.props\r\n                    }\r\n                });\r\n            }\r\n            completionItems.push({\r\n                label: component.name,\r\n                kind: monaco.languages.CompletionItemKind.Class,\r\n                insertText: component.name,\r\n                documentation: component.props,\r\n                children: children\r\n            });\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (ref.current) {\r\n\r\n            let theme = \"vs-dark\";\r\n            if (props.theme == \"white\" || props.theme == \"g10\") {\r\n                theme = \"vs\"\r\n            } else if (props.theme == \"g90\" || props.theme == \"g100\") {\r\n                theme = \"vs-dark\";\r\n            }\r\n\r\n\r\n            // Copy over editor styles\r\n            const style = document.querySelector(\r\n                \"link[rel='stylesheet'][data-name='vs/editor/editor.main']\"\r\n            );\r\n            ref.current.appendChild(style.cloneNode(true));\r\n            let containerEl = ref.current.querySelector(\"#container\");\r\n            if (!editor) {\r\n                const workerUrl = URL.createObjectURL(new Blob([`\r\n                    self.MonacoEnvironment = {\r\n                        baseUrl: '/monaco-editor/min',\r\n                        paths: {\r\n                            vs: '/monaco-editor/min/vs'\r\n                        },\r\n                        getWorkerUrl: function (moduleId, label) {\r\n                            if (label === 'json') {\r\n                                return './language/json/jsonWorker.js';\r\n                            }\r\n                            if (label === 'css' || label === 'scss' || label === 'less') {\r\n                                return './language/css/cssWorker.js';\r\n                            }\r\n                            if (label === 'html' || label === 'handlebars' || label === 'razor') {\r\n                                return './language/html/htmlWorker.js';\r\n                            }\r\n                            if (label === 'typescript' || label === 'javascript') {\r\n                                return './language/typescript/tsWorker.js';\r\n                            }\r\n                            return '../base/worker/workerMain.js';\r\n                        }\r\n                    };\r\n                `], { type: 'text/javascript' }));\r\n\r\n                monaco.languages.json.jsonDefaults.setModeConfiguration({\r\n                    ...monaco.languages.json.jsonDefaults.modeConfiguration,\r\n                    worker: {\r\n                        id: 'json',\r\n                        label: 'json',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                monaco.languages.css.cssDefaults.setModeConfiguration({\r\n                    ...monaco.languages.css.cssDefaults.modeConfiguration,\r\n                    worker: {\r\n                        id: 'css',\r\n                        label: 'css',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n                    target: monaco.languages.typescript.ScriptTarget.ES2015,\r\n                    allowNonTsExtensions: true\r\n                });\r\n\r\n                monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\r\n                    noSemanticValidation: true,\r\n                    noSyntaxValidation: false\r\n                });\r\n\r\n                monaco.languages.typescript.javascriptDefaults.setWorkerOptions({\r\n                    ...monaco.languages.typescript.javascriptDefaults.workerOptions,\r\n                    module: \"commonjs\",\r\n                    worker: {\r\n                        id: 'js',\r\n                        label: 'js',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                // Set the mode configuration for JavaScript\r\n                monaco.languages.typescript.javascriptDefaults.setEagerModelSync(true);\r\n\r\n                monaco.languages.html.htmlDefaults.setModeConfiguration({\r\n                    ...monaco.languages.html.htmlDefaults.modeConfiguration,\r\n                    worker: {\r\n                        id: 'html',\r\n                        label: 'html',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                let editorNode = monaco.editor.create(containerEl, {\r\n                    automaticLayout: true,\r\n                    language: \"json\" || props.language,\r\n                    value: props.value,\r\n                    scrollBeyondLastLine: false,\r\n                    minimap: true,\r\n                    theme: theme,\r\n                    suggest: {\r\n                        triggerCharacters: ['.', ':'],\r\n                        completionItems: getCompletionItems()\r\n                    }\r\n                });\r\n\r\n                editorNode.getModel().onDidChangeContent(() => {\r\n                    const value = editorNode.getValue();\r\n                    props.dispatchEvent(EventAPI.EDITORCODE_CHANGED, { payload: { id: props.id || props.elementid, value: value } });\r\n                });\r\n\r\n                // Add toolbar buttons\r\n                editorNode.addAction({\r\n                    id: \"collapse-all\",\r\n                    label: \"Collapse All\",\r\n                    keybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.US_MINUS],\r\n                    run: function (ed) {\r\n                        ed.getAction(\"editor.foldAll\").run();\r\n                    }\r\n                });\r\n\r\n                editorNode.addAction({\r\n                    id: \"expand-all\",\r\n                    label: \"Expand All\",\r\n                    keybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.US_EQUAL],\r\n                    run: function (ed) {\r\n                        ed.getAction(\"editor.unfoldAll\").run();\r\n                    }\r\n                });\r\n                editorNode.addAction({\r\n                    id: \"full-screen\",\r\n                    label: \"Full Screen\",\r\n                    keybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.KEY_F],\r\n                    run: function (ed) {\r\n                        const container = ed.getDomNode();\r\n                        if (container.requestFullscreen) {\r\n                            container.requestFullscreen();\r\n                        } else if (container.msRequestFullscreen) {\r\n                            container.msRequestFullscreen();\r\n                        } else if (container.mozRequestFullScreen) {\r\n                            container.mozRequestFullScreen();\r\n                        } else if (container.webkitRequestFullscreen) {\r\n                            container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                editorNode.addAction({\r\n                    id: \"exit-full-screen\",\r\n                    label: \"Exit Full Screen\",\r\n                    keybindings: [monaco.KeyMod.CtrlCmd | monaco.KeyCode.Escape],\r\n                    run: function (ed) {\r\n                        if (document.exitFullscreen) {\r\n                            document.exitFullscreen();\r\n                        } else if (document.msExitFullscreen) {\r\n                            document.msExitFullscreen();\r\n                        } else if (document.mozCancelFullScreen) {\r\n                            document.mozCancelFullScreen();\r\n                        } else if (document.webkitExitFullscreen) {\r\n                            document.webkitExitFullscreen();\r\n                        }\r\n                    }\r\n                });\r\n                \r\n                setEditor(editorNode);\r\n\r\n            } else {\r\n                editor.setTheme(props.theme);\r\n                editor.setValue(props.value);\r\n                // editor.setLanguage(props.language);\r\n            }\r\n        }\r\n\r\n    }, [props.theme, props.value, props.language]);\r\n\r\n    return (<>\r\n        {props.label ? <label class=\"cds--label\" style={{ margin: \"5px 0px\" }}>{props.label}</label> : null}\r\n        <div ref={ref} style={{ width: props.width, height: props.height, border: \"1px solid lightgrey\", padding: \"0px 5px\", margin: \"5px 0px\", borderRadius: 5, backgroundColor: \"var(--cds-field)\" }}>\r\n            <div id=\"container\"></div>\r\n        </div>\r\n    </>);\r\n}\r\n\r\nconst styles = `\r\n    #container {\r\n        overflow: hidden; width: 100%; height: 100%;\r\n    }\r\n    .monaco-editor, .decorationsOverviewRuler, .minimap {\r\n        --vscode-editor-background: var(--cds-field) !important;\r\n    }\r\n    .monaco-editor .margin {\r\n        --vscode-editorGutter-background: var(--cds-field) !important;\r\n    }\r\n`\r\nconst props = [{\r\n    name: \"label\",\r\n    defaultValue: \"\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"value\",\r\n    defaultValue: \"\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"language\",\r\n    defaultValue: \"javascript\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"height\",\r\n    defaultValue: \"200px\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"width\",\r\n    defaultValue: \"40vw\",\r\n    type: \"string\"\r\n}]\r\n\r\nconst slots = [];\r\n\r\nconst WrappedComponent = wrapper(React.forwardRef(SrsCodeEditor), props);\r\nexport { WrappedComponent, styles, props, dispatchedEvents, slots };"],"names":["dispatchedEvents","EventAPI","SrsCodeEditor","props","ref","_useState2","_slicedToArray","useState","editor","setEditor","window","MonacoEnvironment","getWorkerUrl","moduleId","label","getCompletionItems","completionItems","name","prop1","prop2","children","prop3","prop4","forEach","component","map","child","kind","monaco","insertText","documentation","push","useEffect","current","theme","style","document","querySelector","appendChild","cloneNode","containerEl","setTheme","setValue","value","workerUrl","URL","createObjectURL","Blob","type","_objectSpread","worker","id","src","target","allowNonTsExtensions","noSemanticValidation","noSyntaxValidation","module","editorNode","automaticLayout","language","scrollBeyondLastLine","minimap","suggest","triggerCharacters","getModel","onDidChangeContent","getValue","dispatchEvent","payload","elementid","addAction","keybindings","run","ed","getAction","container","getDomNode","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","React","class","margin","width","height","border","padding","borderRadius","backgroundColor","styles","defaultValue","slots","WrappedComponent","wrapper"],"sourceRoot":""}