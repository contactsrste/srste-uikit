{"version":3,"file":"static/js/basic-CodeEditor.d7f05d24.chunk.js","mappings":"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","sources":["components/basic/CodeEditor.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport wrapper from \"../../commons/WebComponentWrapper\";\r\nimport * as monaco from 'monaco-editor';\r\n\r\nconst dispatchedEvents = [];\r\n\r\n/*\r\n    Example: <srs-codeeditor value=\"/>\r\n*/\r\nconst SrsCodeEditor = function (props, ref) {\r\n\r\n    const [editor, setEditor] = useState(null);\r\n\r\n    window.MonacoEnvironment = window.MonacoEnvironment || {\r\n        getWorkerUrl: function (moduleId, label) {\r\n            if (label === 'json') {\r\n                return './json.worker.bundle.js';\r\n            }\r\n            if (label === 'css' || label === 'scss' || label === 'less') {\r\n                return './css.worker.bundle.js';\r\n            }\r\n            if (label === 'html' || label === 'handlebars' || label === 'razor') {\r\n                return './html.worker.bundle.js';\r\n            }\r\n            if (label === 'typescript' || label === 'javascript') {\r\n                return './ts.worker.bundle.js';\r\n            }\r\n            return './editor.worker.bundle.js';\r\n        }\r\n    };\r\n\r\n    const getCompletionItems = () => {\r\n        // Add code for building a content tree of components and its properties\r\n        const components = [{ name: \"component1\", props: { prop1: \"test1\", prop2: \"red\" }, children: [{ name: \"component2\", props: { prop3: \"test3\", prop4: \"world\" } }] }];\r\n        const completionItems = [];\r\n        components.forEach(component => {\r\n            let children = [];\r\n            if (component.children) {\r\n                children = component.children.map(child => {\r\n                    return {\r\n                        label: child.name,\r\n                        kind: monaco.languages.CompletionItemKind.Class,\r\n                        insertText: child.name,\r\n                        documentation: child.props\r\n                    }\r\n                });\r\n            }\r\n            completionItems.push({\r\n                label: component.name,\r\n                kind: monaco.languages.CompletionItemKind.Class,\r\n                insertText: component.name,\r\n                documentation: component.props,\r\n                children: children\r\n            });\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (ref.current) {\r\n\r\n            let theme = \"vs-dark\";\r\n            if (props.theme == \"white\" || props.theme == \"g10\") {\r\n                theme = \"vs\"\r\n            } else if (props.theme == \"g90\" || props.theme == \"g100\") {\r\n                theme = \"vs-dark\";\r\n            }\r\n\r\n\r\n            // Copy over editor styles\r\n            const style = document.querySelector(\r\n                \"link[rel='stylesheet'][data-name='vs/editor/editor.main']\"\r\n            );\r\n            ref.current.appendChild(style.cloneNode(true));\r\n            let containerEl = ref.current.querySelector(\"#container\");\r\n            if (!editor) {\r\n                const workerUrl = URL.createObjectURL(new Blob([`\r\n                    self.MonacoEnvironment = {\r\n                        baseUrl: '/monaco-editor/min',\r\n                        paths: {\r\n                            vs: '/monaco-editor/min/vs'\r\n                        },\r\n                        getWorkerUrl: function (moduleId, label) {\r\n                            if (label === 'json') {\r\n                                return './language/json/jsonWorker.js';\r\n                            }\r\n                            if (label === 'css' || label === 'scss' || label === 'less') {\r\n                                return './language/css/cssWorker.js';\r\n                            }\r\n                            if (label === 'html' || label === 'handlebars' || label === 'razor') {\r\n                                return './language/html/htmlWorker.js';\r\n                            }\r\n                            if (label === 'typescript' || label === 'javascript') {\r\n                                return './language/typescript/tsWorker.js';\r\n                            }\r\n                            return '../base/worker/workerMain.js';\r\n                        }\r\n                    };\r\n                `], { type: 'text/javascript' }));\r\n\r\n                monaco.languages.json.jsonDefaults.setModeConfiguration({\r\n                    ...monaco.languages.json.jsonDefaults.modeConfiguration,\r\n                    worker: {\r\n                        id: 'json',\r\n                        label: 'json',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                monaco.languages.css.cssDefaults.setModeConfiguration({\r\n                    ...monaco.languages.css.cssDefaults.modeConfiguration,\r\n                    worker: {\r\n                        id: 'css',\r\n                        label: 'css',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n                    target: monaco.languages.typescript.ScriptTarget.ES2015,\r\n                    allowNonTsExtensions: true\r\n                });\r\n\r\n                monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\r\n                    noSemanticValidation: true,\r\n                    noSyntaxValidation: false\r\n                });\r\n\r\n                monaco.languages.typescript.javascriptDefaults.setWorkerOptions({\r\n                    ...monaco.languages.typescript.javascriptDefaults.workerOptions,\r\n                    module: \"commonjs\",\r\n                    worker: {\r\n                        id: 'js',\r\n                        label: 'js',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                // Set the mode configuration for JavaScript\r\n                monaco.languages.typescript.javascriptDefaults.setEagerModelSync(true);\r\n\r\n                monaco.languages.html.htmlDefaults.setModeConfiguration({\r\n                    ...monaco.languages.html.htmlDefaults.modeConfiguration,\r\n                    worker: {\r\n                        id: 'html',\r\n                        label: 'html',\r\n                        src: workerUrl\r\n                    }\r\n                });\r\n\r\n                let editorNode = monaco.editor.create(containerEl, {\r\n                    automaticLayout: true,\r\n                    language: \"json\" || props.language,\r\n                    value: props.value,\r\n                    scrollBeyondLastLine: false,\r\n                    minimap: true,\r\n                    theme: theme,\r\n                    suggest: {\r\n                        triggerCharacters: ['.', ':'],\r\n                        completionItems: getCompletionItems()\r\n                    }\r\n                });\r\n                setEditor(editorNode);\r\n            } else {\r\n                editor.setTheme(props.theme);\r\n                editor.setValue(props.value);\r\n                // editor.setLanguage(props.language);\r\n            }\r\n        }\r\n\r\n    }, [props.theme, props.value, props.language]);\r\n\r\n    return (<>\r\n        {props.label ? <label class=\"cds--label\" style={{ margin: \"5px 0px\" }}>{props.label}</label> : null}\r\n        <div ref={ref} style={{ width: props.width, height: props.height, border: \"1px solid lightgrey\", padding: \"0px 5px\", margin: \"5px 0px\", borderRadius: 5, backgroundColor: \"var(--cds-field)\" }}>\r\n            <div id=\"container\"></div>\r\n        </div>\r\n    </>);\r\n}\r\n\r\nconst styles = `\r\n    #container {\r\n        overflow: hidden; width: 100%; height: 100%;\r\n    }\r\n    .monaco-editor, .decorationsOverviewRuler, .minimap {\r\n        --vscode-editor-background: var(--cds-field) !important;\r\n    }\r\n    .monaco-editor .margin {\r\n        --vscode-editorGutter-background: var(--cds-field) !important;\r\n    }\r\n`\r\nconst props = [{\r\n    name: \"label\",\r\n    defaultValue: \"\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"value\",\r\n    defaultValue: \"\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"language\",\r\n    defaultValue: \"javascript\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"height\",\r\n    defaultValue: \"200px\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"width\",\r\n    defaultValue: \"40vw\",\r\n    type: \"string\"\r\n}]\r\n\r\nconst slots = [];\r\n\r\nconst WrappedComponent = wrapper(React.forwardRef(SrsCodeEditor), props);\r\nexport { WrappedComponent, styles, props, dispatchedEvents, slots };"],"names":["dispatchedEvents","SrsCodeEditor","props","ref","_useState","useState","_useState2","_slicedToArray","editor","setEditor","window","MonacoEnvironment","getWorkerUrl","moduleId","label","getCompletionItems","completionItems","name","prop1","prop2","children","prop3","prop4","forEach","component","map","child","kind","monaco","insertText","documentation","push","useEffect","current","theme","style","document","querySelector","appendChild","cloneNode","containerEl","setTheme","setValue","value","workerUrl","URL","createObjectURL","Blob","type","_objectSpread","worker","id","src","target","allowNonTsExtensions","noSemanticValidation","noSyntaxValidation","module","editorNode","automaticLayout","language","scrollBeyondLastLine","minimap","suggest","triggerCharacters","_jsxs","_Fragment","_jsx","class","margin","width","height","border","padding","borderRadius","backgroundColor","styles","defaultValue","slots","WrappedComponent","wrapper","React"],"sourceRoot":""}