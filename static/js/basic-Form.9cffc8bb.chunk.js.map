{"version":3,"file":"static/js/basic-Form.9cffc8bb.chunk.js","mappings":"quEAKA,IAAMA,EAAmB,GAenBC,EAAU,SAAUC,EAAOC,GAC7B,IAA4DC,EAAAC,GAA1BC,EAAAA,EAAAA,UAASJ,EAAMK,MAAQ,CAAC,GAAE,GAArDC,EAASJ,EAAA,GAAEK,EAAYL,EAAA,GACxBM,GAAaC,EAAAA,EAAAA,QAAO,MAgC1B,OA/BAC,EAAAA,EAAAA,YAAU,WAEN,GADoBT,EAAIU,UAGpBV,EAAIU,SACJV,EAAIU,QAAQC,iBAAiBC,EAAAA,EAAAA,0BAAmC,SAACC,GAC7D,IAAIC,E,+VAAeC,CAAA,GAAQV,GAM3B,GALAS,EAAgBD,EAAIG,OAAOC,QAAQC,WAAaJ,EAAgBD,EAAIG,OAAOC,QAAQC,YAAc,CAAC,EAClGJ,EAAgBD,EAAIG,OAAOC,QAAQC,WAAWC,MAAQN,EAAIG,OAAOC,QAAQE,MACzEb,EAAaQ,GACbf,EAAMqB,cAAcR,EAAAA,EAAAA,mBAA6B,CAAEK,QAAS,CAAEE,MAAOL,EAAiBO,GAAItB,EAAMuB,aAChGvB,EAAMwB,SAAST,GACXP,EAAWG,QAEX,IADA,IAAIc,EAAmBjB,EAAWG,QAAQc,mBACjCC,EAAI,EAAGA,EAAID,EAAiBE,OAAQD,IACzCD,EAAiBC,GAAGE,UAAYC,KAAKC,UAAUf,EAG3D,IAGAP,EAAWG,SAEX,IADA,IAAIc,EAAmBjB,EAAWG,QAAQc,mBACjCC,EAAI,EAAGA,EAAID,EAAiBE,OAAQD,IACzCD,EAAiBC,GAAGK,aAAa,YAAaF,KAAKC,UAAUxB,GAIzE,GAAG,CAACN,EAAMgC,KAAMhC,EAAMK,OAGd4B,EAAAA,cAACC,EAAAA,IAAI,KACTD,EAAAA,cAACE,EAAAA,IAAS,KACNF,EAAAA,cAAA,QAAMhC,IAAKO,KAGvB,EAEM4B,EAAM,OAGNpC,EAAQ,CAAC,CACXgC,KAAM,OACNK,aAAc,GACdC,KAAM,UACP,CACCN,KAAM,OACNK,aAAc,CAAC,EACfC,KAAM,WAGJC,EAAQ,CAAC,CAACP,KAAM,UAAWQ,QAAS,CAAC,sBAErCC,GAAmBC,EAAAA,EAAAA,GAAQT,EAAAA,WAAiBlC,GAAUC,E","sources":["components/basic/Form.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport wrapper from \"../../commons/WebComponentWrapper\";\r\nimport { Accordion, Form } from \"carbon-components-react\";\r\nimport { EventAPI } from \"../../commons/EventAPI\";\r\n\r\nconst dispatchedEvents = [];\r\n\r\n/*\r\n    Example: \r\n        <srs-form data={} sections=[{name: \"section1\", title: \"Section 1\", columns: 2}, {name: \"section2\", title: \"Section 2\", columns: 4}]>\r\n            <srs-form-section name=\"section1\" columns=\"2\">\r\n                <srs-form-field type=\"input\" value_changed_event=\"\" name=\"field1\" field_data={}/>\r\n                <srs-form-field type=\"input\" name=\"field2\" field_data={}/>\r\n                <srs-form-field type=\"input\" name=\"field3\" field_data={}/>\r\n            </srs-form-section>\r\n            <srs-form-section name=\"section2\" columns=\"4\">\r\n                ...\r\n            </srs-form-section>\r\n        </srs-form>\r\n*/\r\nconst SrsForm = function (props, ref) {\r\n    const [formValue, setFormValue] = useState(props.data || {});\r\n    const sectionRef = useRef(null);\r\n    useEffect(() => {\r\n        const currentNode = ref.current;\r\n        if (!currentNode) return;\r\n\r\n        if (ref.current) {\r\n            ref.current.addEventListener(EventAPI.FORM_FIELD_VALUE_CHANGED, (evt) => {\r\n                let currentFormData = { ...formValue };\r\n                currentFormData[evt.detail.payload.fieldName] = currentFormData[evt.detail.payload.fieldName] || {};\r\n                currentFormData[evt.detail.payload.fieldName].value = evt.detail.payload.value;\r\n                setFormValue(currentFormData);\r\n                props.dispatchEvent(EventAPI.FORM_VALUE_CHANGED, { payload: { value: currentFormData, id: props.elementid } });\r\n                props.setValue(currentFormData);\r\n                if (sectionRef.current) {\r\n                    let assignedElements = sectionRef.current.assignedElements();\r\n                    for (let i = 0; i < assignedElements.length; i++) {\r\n                        assignedElements[i].form_data = JSON.stringify(currentFormData)\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if (sectionRef.current) {\r\n            let assignedElements = sectionRef.current.assignedElements();\r\n            for (let i = 0; i < assignedElements.length; i++) {\r\n                assignedElements[i].setAttribute('form_data', JSON.stringify(formValue));\r\n            }\r\n        }\r\n\r\n    }, [props.name, props.data]);\r\n\r\n\r\n    return (<Form>\r\n        <Accordion>\r\n            <slot ref={sectionRef}></slot>\r\n        </Accordion>\r\n    </Form>)\r\n}\r\n\r\nconst styles = `\r\n\r\n`\r\nconst props = [{\r\n    name: \"name\",\r\n    defaultValue: \"\",\r\n    type: \"string\"\r\n}, {\r\n    name: \"data\",\r\n    defaultValue: {},\r\n    type: \"object\"\r\n}]\r\n\r\nconst slots = [{name: \"default\", allowed: [\"srs-form-section\"]}];\r\n\r\nconst WrappedComponent = wrapper(React.forwardRef(SrsForm), props);\r\nexport { WrappedComponent, styles, props, dispatchedEvents, slots };"],"names":["dispatchedEvents","SrsForm","props","ref","_useState2","_slicedToArray","useState","data","formValue","setFormValue","sectionRef","useRef","useEffect","current","addEventListener","EventAPI","evt","currentFormData","_objectSpread","detail","payload","fieldName","value","dispatchEvent","id","elementid","setValue","assignedElements","i","length","form_data","JSON","stringify","setAttribute","name","React","Form","Accordion","styles","defaultValue","type","slots","allowed","WrappedComponent","wrapper"],"sourceRoot":""}